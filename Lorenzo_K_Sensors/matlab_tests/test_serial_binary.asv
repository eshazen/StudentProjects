%
% test/demo serial binary data transfer from e.g. Arduino
%

arduino = serialport("/dev/ttyACM0", 115200);
configureTerminator( arduino, "LF");

while true

    writeline( arduino, "100");
    tic

    for i=1:100
        write(arduino,'*',"char");
        f
        sentinel = read(arduino,1,"uint8");
        if( not(sentinel == 23))
            % make an error
            error("Unexpected data from arduino");
        end
        
        p1 = read( arduino, 3, "single");
        p2 = read( arduino, 3, "single");
    end
    
    toc
end
